<%= render 'shared/error', obj: @user %> <!-- passing @user object in to 'obj' object in _error.html.erb -->

<div class = "row">
  <div class="well col-md-8 col-md-offset-2">
      
      <%= form_for(@user, html: { multipart: true}) do |f|%>
        <h3>Name and Account Details</h3>
        <%= f.label :email, 'Email (*)' %>
        <%= f.text_field :email %>
 
        <%= f.label :password, 'Password (*)' %>
        <%= f.password_field :password %>
        
        <hr/>
        
        <%= f.label :prefix %>
        <%= f.text_field :prefix %>

        <%= f.label :first_name, 'First Name (*)' %>
        <%= f.text_field :first_name %>

        <%= f.label :last_name, 'Last Name (*)' %>
        <%= f.text_field :last_name %>
        
        <%= f.label :suffix %>
        <%= f.text_field :suffix %>
        
        <hr/>
        <h3>Contact Details</h3>
        
        <%= f.select :address_type, [['Work',1],['Home',2]], :prompt => 'Select One' %>
        
        <%= f.label :address %>
        <%= f.text_field :address %>
        
        <%= f.label :city %>
        <%= f.text_field :city %>
        
        
        <%= f.label :state %>
        <%= f.text_field :state %>
        
        
        <%= f.label :zipcode, 'Zip Code' %>
        <%= f.number_field :zipcode %>
        
        
        <%= f.label :country %>
        <%= f.collection_select :country_id, Country.all, :id, :name, :prompt => 'Select One' %>
        
        
        <%= f.label :phone_work, 'Phone (Work)' %>
        <%= f.text_field :phone_work %>
        
        <%= f.label :phone_mobile, 'Phone (Mobile)' %>
        <%= f.text_field :phone_mobile %>
        
        <%= f.label :fax_number, 'Fax Number' %>
        <%= f.text_field :phone_mobile %>
        
        <hr/>
        <h3>Professional Details</h3>
        
        <%= f.label :institution, 'Institution (*)' %>
        <%= f.text_field :institution %>
        
        <%= f.label :status, 'Status (*)' %>
        <%= f.collection_select :status_id, Status.all, :id, :name, :prompt => 'Select One' %>
        
        
    
    
        <hr/>
        <p><strong>Upload Your Profile Picture</strong></p>
        <span class="file">
          <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
        </span>  
        
      
      
      
        <%= f.submit(@user.new_record? ? 'Register' : 'Edit Account', class: "btn btn-success")%>
      <% end %>

 </div>
</div>

<!-- jquery/javascript for pics to limit the pic size to 5 mb, user_picture is the id of the 'choose file to upload' on the website -->
<script type="text/javascript">
  $('#user_picture').bind('change',function(){
    size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 4) {
      alert('Maximum file size is 4MB')
    }
  });  
  
</script>

