<style media="screen">
/* ----------------------------------------------
 * Generated by Animista on 2017-3-20 14:27:22
 * http://animista.net
 * T: @cssanimista
 * ---------------------------------------------- */

/**
 * ----------------------------------------
 * animation scale-up-ver-center
 * ----------------------------------------
 */
@-webkit-keyframes scale-up-ver-center {
  0% {
    -webkit-transform: scaleY(0.4);
            transform: scaleY(0.4);
  }
  100% {
    -webkit-transform: scaleY(1);
            transform: scaleY(1);
  }
}
@keyframes scale-up-ver-center {
  0% {
    -webkit-transform: scaleY(0.4);
            transform: scaleY(0.4);
  }
  100% {
    -webkit-transform: scaleY(1);
            transform: scaleY(1);
  }
}

/**
 * ----------------------------------------
 * animation tracking-in-expand-fwd
 * ----------------------------------------
 */
@-webkit-keyframes tracking-in-expand-fwd {
  0% {
    letter-spacing: -0.5em;
    -webkit-transform: translateZ(-700px);
            transform: translateZ(-700px);
    opacity: 0;
  }
  40% {
    opacity: 0.6;
  }
  100% {
    -webkit-transform: translateZ(0);
            transform: translateZ(0);
    opacity: 1;
  }
}
@keyframes tracking-in-expand-fwd {
  0% {
    letter-spacing: -0.5em;
    -webkit-transform: translateZ(-700px);
            transform: translateZ(-700px);
    opacity: 0;
  }
  40% {
    opacity: 0.6;
  }
  100% {
    -webkit-transform: translateZ(0);
            transform: translateZ(0);
    opacity: 1;
  }
}
.title {
	-webkit-animation: tracking-in-contract-bck-top 1s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;
	-moz-animation: tracking-in-contract-bck-top 1s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;
	animation: tracking-in-contract-bck-top 1s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;
}
</style>

<body>


 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
 <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>

  <div class="row">
    <div class="col-xs-12 center">
      <div id="mapid" class="well"></div>
      <p>Double Click Marker to View an Existing Project</p>
      <hr>
      <div class = "jumbotext" >
        <h1 class="title">Welcome to the collaborative database of the Houston Global Health Collaborative!</h1>
        <%= link_to "Sign Up", register_path, class: "btn btn-large btn-success" %>
      </div>
    </div>
  </div>



   <div class="row">
    <div class="col-sm-6 center">
      <h2 class="midrow">

      </h2>
      <p><%= link_to "    View All Projects     ", projects_path, class: "btn btn-warning btn-small" %></p>
    </div>

    <div class="col-sm-6 center">
      <h2 class="midrow">
      </h2>
      <p><%= link_to "Return to our main website", "http://houstonglobalhealth.org/", class: "btn btn-warning btn-small" %></p>
    </div>
   </div>


   <script type="text/javascript">
     var mymap = L.map('mapid').setView([29.7604, -95.3698], 2);

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
      maxZoom: 18,
      id: 'bshap93.cfe51e3b',
      accessToken: 'pk.eyJ1IjoiYnNoYXA5MyIsImEiOiJjaXpqNW94MzAwMnN6MndwNmNpd2JzZGwzIn0.8YkeQHxiJlTbC73ItPVPQQ'
    }).addTo(mymap);


   </script>

   <% @locations.each do |location| %>
    <% @project = Project.find(location.project_id) %>
    <% if @project.approved %>
      <script type="text/javascript">
        var marker<%= location.id %> = L.marker([<%= location.latitude %>, <%= location.longitude %>]).addTo(mymap);
        marker<%= location.id %>.bindPopup("<b><%= location.name %></b>").openPopup();
        function onMapClick<%= location.id %>(e) {
          window.location.replace("https://hghcdatabase.herokuapp.com/projects/<%= location.project.id %>");
        }
        marker<%= location.id %>.on('dblclick', onMapClick<%= location.id %>);
      </script>
    <% end %>

   <% end %>

</body>
